<!DOCTYPE html>
<html>
	<head>
		 <meta charset="UTF-8">
		
	</head>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
	<body>
		<canvas id="myChart" style="width:100%;max-width:600px"></canvas>
		
		
		
		
		<script>

			var getJson = async function (){
				
				let xValues = []; 
				let toner = [];
				let unidade = [];
				let kit = [];
				const urlParams = new URLSearchParams(window.location.search);
				const serial = urlParams.get("printer");
				//const serial =  'CAB220392B04';
				const res = await fetch("logSupplies.json");
				const data = await res.json();
				//console.log(serial);
				
					data.Toners.forEach(t=> {
						console.log(t.printer === serial);
						if(t.printer === serial){
							xValues = t.dias;
							toner = t.consumo;
						}
					});
					data.Unidades.forEach(u=> {
						if(u.printer === serial){
							unidade = u.consumo;
						}
					});
					data.Kits.forEach(k=> {
						if(k.printer === serial){
							kit = k.consumo;
						}
					});
			
		//const xValues = ['01/06','02/06','03/06','04/06','05/06','06/06','07/06','08/06','09/06','10/06'];
		
		new Chart("myChart", {
		  type: "line",
		 
		  data: {
		    labels: xValues,
		    datasets: [{ 
		      data: toner,
		      borderColor: "blue",
		      fill: false,
		      label: "Toner"
		    },
		    { 
		      data: unidade,
		      borderColor: "red",
		      fill: false,
		      label: "Unidade"
			},
			{ 
		      data: kit,
		      borderColor: "green",
		      fill: false,
		      label: "Kit"
			}
		    ]
		  },
		  options: {
		    legend: {position: 'top'},
			   
		  }
		});
		}
		getJson();
		</script>
		
		
	</body>
</html>